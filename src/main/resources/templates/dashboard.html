<!DOCTYPE html>

<html xmlns:th = "http://thymeleaf.org">
	<head>
		<title>Dashboard</title>
	</head>
		<h1>Dashboard</h1>
		<h2>Welcome, [[${user.username}]]</h2>
			<body>
			
			<a th:href="@{createTask/{userId}(userId=${user.userId})}">
   			 	<button>Create New Task</button>
			</a>
			
	
			<form method = "post" action = "/logout">
				<input type = "hidden" th:name = "${_csrf.parameterName	}" th:value = "${_csrf.token}"/>
				<button type = "submit">Logout</button>
			</form>
			<table>
				<tr>
					<th>ID</th>
					<th>Date</th>
					<th>Details</th>
					<th>Assigned To</th>
					<th>Edit</th>
					<th>Complete Task</th>
				</tr>
				
				<tr th:each = "task:${tasks}">
			
					<td>[[${task.taskId}]]</td>
					<td>[[${task.detailDate}]]</td>
					<td>[[${task.details}]]</td>
					<td>[[${task.assignedDept}]]</td>
					<td><a th:href="@{viewTask/{taskId}(taskId=${task.taskId})}"><button>Edit</button></a>
					<td><form method = "post" th:action ="@{/delete/{taskId}/{userId}(taskId=${task.taskId},userId = ${user.userId})}">
					<input type = "hidden" th:name = "${_csrf.parameterName}" th:value = "${_csrf.token}"/>
					<button type = "submit" id = "resolve">Complete Task </button></form></td>
						
				</tr>
									
			</table>
			
	
	<script type = "text/javascript" src = "/js/dashboard.js" ></script>
	<script th:inline ="javascript">var token = /*[[${_csrf.token}]]*/''</script>
	</body>

</html>